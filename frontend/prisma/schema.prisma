// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         Int         @id @default(autoincrement())
  email      String      @unique
  username   String
  password   String
  workspaces Workspace[]
}

model Workspace {
  id          Int     @id @default(autoincrement())
  owner_id    Int
  description String
  status      String
  owner       User    @relation(fields: [owner_id], references: [id])
  boards      Board[]
}

model Board {
  id           Int       @id @default(autoincrement())
  workspace_id Int
  title        String
  workspace    Workspace @relation(fields: [workspace_id], references: [id])
  lists        List[]
  labels       Label[]
}

model List {
  id       Int    @id @default(autoincrement())
  board_id Int
  title    String
  position Int
  board    Board  @relation(fields: [board_id], references: [id])
  cards    Card[]
}

model Label {
  id       Int    @id @default(autoincrement())
  board_id Int
  name     String
  color    String
  board    Board  @relation(fields: [board_id], references: [id])
  cards    Card[]
}

model Card {
  id          Int       @id @default(autoincrement())
  list_id     Int
  label_id    Int?
  title       String
  description String
  start_date  DateTime
  due_date    DateTime
  position    Int?
  list        List      @relation(fields: [list_id], references: [id])
  label       Label?    @relation(fields: [label_id], references: [id])
}